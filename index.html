<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>R-CODE NEON v14</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{--neon:#00ff9c}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:Courier New,monospace;
  background:#000;color:var(--neon);overflow:hidden
}
#matrix{position:fixed;inset:0;z-index:0}
.wrap{position:relative;z-index:2;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:10px}
.container{
  width:100%;max-width:580px;background:rgba(10,15,20,.85);
  border:1px solid var(--neon);border-radius:16px;padding:18px;
  box-shadow:0 0 25px rgba(0,255,156,.5)
}
h1{text-align:center;font-size:18px;margin:0 0 12px}
label{font-size:12px;opacity:.8}
input,textarea,select,button{
  width:100%;background:#000;color:var(--neon);
  border:1px solid var(--neon);border-radius:10px;
  padding:10px;margin:6px 0;font-family:inherit
}
textarea{min-height:120px;resize:none}
.row{display:flex;gap:10px;align-items:center}
button{cursor:pointer;font-weight:bold}
button.small{flex:.4}
.progress{width:100%;height:8px;background:#022;border-radius:6px;overflow:hidden}
.bar{height:100%;width:0%;background:linear-gradient(90deg,#00ff9c,#00cfff)}
footer{text-align:center;font-size:11px;opacity:.6;margin-top:8px}
</style>
</head>

<body>
<canvas id="matrix"></canvas>

<div class="wrap">
<div class="container">
<h1>üñ•Ô∏è R-CODE NEON v14</h1>

<label>MASTER KEY</label>
<div class="row">
  <input id="key">
  <button class="small" onclick="generateKey()">üé≤</button>
</div>

<label>EXPIRY (encode time)</label>
<div class="row">
  <input id="expiryValue" type="number" min="0">
  <select id="expiryUnit">
    <option value="none">No Expiry</option>
    <option value="minutes">Minutes</option>
    <option value="hours">Hours</option>
    <option value="days">Days</option>
  </select>
</div>

<label>INPUT</label>
<textarea id="input"></textarea>

<div class="row">
  <button onclick="encode()">ENCODE</button>
  <button onclick="decode()">DECODE</button>
</div>

<div class="progress"><div class="bar" id="bar"></div></div>

<label>OUTPUT (Terminal)</label>
<textarea id="output" readonly></textarea>
<button onclick="copyOutput()">üìã COPY</button>

<footer>Exclusive R-CODE ‚Ä¢ Confidently-Wrong Decoys ‚Ä¢ Anti-AI</footer>
</div>
</div>

<script>
/* ================= CONFIG ================= */
const CONTROL_URL="https://oxygen120.github.io/rcode-control/control.json";

/* ================= MATRIX ================= */
const canvas=document.getElementById("matrix"),ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();addEventListener("resize",resize);
const chars="01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ";
const fs=14;let cols=Math.floor(canvas.width/fs);
let drops=Array(cols).fill(1);
setInterval(()=>{
  ctx.fillStyle="rgba(0,0,0,.06)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#00ff9c";ctx.font=fs+"px monospace";
  for(let i=0;i<drops.length;i++){
    const t=chars[Math.random()*chars.length|0];
    ctx.fillText(t,i*fs,drops[i]*fs);
    if(drops[i]*fs>canvas.height&&Math.random()>0.98)drops[i]=0;
    drops[i]++;
  }
},33);

/* ================= FX ================= */
const TAUNTS=[
 "üòà WRONG KEY, genius.",
 "ü§° Nice try. Still wrong.",
 "üíÄ System laughing at you.",
 "üö´ Access denied.",
 "üß± You hit a wall."
];
function typeOut(txt){
  output.value="";let i=0;
  const t=setInterval(()=>{
    output.value+=txt[i++]||"";
    output.scrollTop=output.scrollHeight;
    if(i>txt.length)clearInterval(t);
  },20);
}
function runProgress(done){
  bar.style.width="0%";let p=0;
  const t=setInterval(()=>{
    p+=Math.random()*18;
    if(p>=100){p=100;clearInterval(t);done()}
    bar.style.width=p+"%";
  },120);
}

/* ================= HELPERS ================= */
const te=new TextEncoder(),td=new TextDecoder();
function hash32(s){let h=2166136261;for(let c of s){h^=c.charCodeAt(0);h=Math.imul(h,16777619)}return(h>>>0).toString(16)}
function xorBytes(d,k){const o=new Uint8Array(d.length);for(let i=0;i<d.length;i++)o[i]=d[i]^k[i%k.length];return o}
function toB64(b){return btoa(String.fromCharCode(...b))}
function fromB64(s){return Uint8Array.from(atob(s),c=>c.charCodeAt(0))}
function makeNoise(len=8){
  const c="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  let s="";for(let i=0;i<len;i++)s+=c[Math.random()*c.length|0];
  return s;
}
function rotate(str,n){n%=str.length;return str.slice(n)+str.slice(0,n)}
function expiryToMs(v,u){
  if(u==="none")return 0;
  const n=+v;if(!n||n<=0)return 0;
  if(u==="minutes")return n*60000;
  if(u==="hours")return n*3600000;
  if(u==="days")return n*86400000;
  return 0;
}

/* ================= RANDOM KEY ================= */
function generateKey(){
  const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%!*";
  let k="";for(let i=0;i<16;i++)k+=c[Math.random()*c.length|0];
  key.value=k;navigator.clipboard.writeText(k);
}

/* ================= DECOYS ================= */
const DECOY_TEXTS=[
  "Meeting confirmed at 7 PM. Location unchanged.",
  "Transaction approved. Reference ID generated.",
  "System check complete. No anomalies detected."
];
function makeDecoy(){
  return DECOY_TEXTS[Math.floor(Math.random()*DECOY_TEXTS.length)];
}

/* ================= ENCODE ================= */
function encode(){
  const k=key.value, txt=input.value;
  if(!k||!txt)return alert("Key & text required");

  // REAL + DECOYS (all encrypted similarly)
  let real = te.encode("REAL::"+txt);
  let dec1 = te.encode("DECOY::"+makeDecoy());
  let dec2 = te.encode("DECOY::"+makeDecoy());

  const kb=te.encode(k);
  function crypt(d){
    let x=d; for(let i=0;i<1000;i++) x=xorBytes(x,kb);
    return toB64(x);
  }

  const pReal=crypt(real);
  const pDec1=crypt(dec1);
  const pDec2=crypt(dec2);

  const noise=makeNoise(6);
  const rot=noise.length%7;

  const pack=[
    rotate(pReal,rot),
    rotate(pDec1,rot+1),
    rotate(pDec2,rot+2)
  ].sort(()=>Math.random()-.5);

  const token=hash32(k+pReal+noise).slice(0,8);
  const ms=expiryToMs(expiryValue.value,expiryUnit.value);
  const exp=ms?Date.now()+ms:0;

  output.value="RC14::v1::"+exp+"::"+noise+"::"+pack.join("~")+"::"+token;
}

/* ================= DECODE ================= */
async function decode(){
  const k=key.value, enc=input.value;
  if(!k||!enc)return alert("Key & data required");

  if(!enc.startsWith("RC14::"))return typeOut("‚ùå INVALID FORMAT");
  const p=enc.split("::");
  if(p.length!==7)return typeOut("‚ùå CORRUPTED DATA");

  const [,ver,exp,noise,pack,token]=p;
  if(ver!=="v1")return typeOut("UNSUPPORTED VERSION");
  if(exp!=="0"&&Date.now()>+exp)return typeOut("‚è≥ MESSAGE EXPIRED");

  // Admin revoke (optional)
  try{
    const r=await fetch(CONTROL_URL+"?t="+Date.now(),{cache:"no-store"});
    const c=await r.json();
    if(c.revokedTokens?.includes(token))
      return typeOut("üö´ PAYLOAD REVOKED BY ADMIN");
  }catch{}

  const parts=pack.split("~");
  const rot=noise.length%7;

  runProgress(()=>{
    let foundDecoy=null;

    for(const part of parts){
      let raw;
      try{ raw=fromB64(rotate(part,part.length-rot)); }catch{ continue; }
      let x=raw, kb=te.encode(k);
      for(let i=0;i<1000;i++) x=xorBytes(x,kb);
      const text=td.decode(x);

      // TRUE path (R-CODE only)
      if(text.startsWith("REAL::")){
        const chk=hash32(k+part+noise).slice(0,8);
        if(chk===token){
          return typeOut(text.replace("REAL::",""));
        }
      }
      // DECOY path (confidently wrong)
      if(text.startsWith("DECOY::")){
        foundDecoy=text.replace("DECOY::","");
      }
    }
    if(foundDecoy) return typeOut(foundDecoy);
    typeOut(TAUNTS[Math.random()*TAUNTS.length|0]);
  });
}

/* ================= COPY ================= */
function copyOutput(){
  if(!output.value)return;
  navigator.clipboard.writeText(output.value);
}
</script>
</body>
</html>