<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>R-CODE NEON v14</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{--neon:#00ff9c}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:Courier New,monospace;
  color:var(--neon);background:#000;overflow:hidden
}
#matrix{position:fixed;inset:0;z-index:0}
.wrap{position:relative;z-index:2;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:10px}
.container{
  width:100%;max-width:580px;
  background:rgba(10,15,20,.85);
  border:1px solid var(--neon);
  border-radius:16px;padding:18px;
  box-shadow:0 0 25px rgba(0,255,156,.5)
}
h1{text-align:center;font-size:18px;margin:0 0 12px}
label{font-size:12px;opacity:.8}
input,textarea,select,button{
  width:100%;background:#000;color:var(--neon);
  border:1px solid var(--neon);border-radius:10px;
  padding:10px;margin:6px 0;font-family:inherit
}
textarea{min-height:120px;resize:none}
.row{display:flex;gap:10px}
button{cursor:pointer;font-weight:bold}
.progress{width:100%;height:8px;background:#022;border-radius:6px;overflow:hidden}
.bar{height:100%;width:0%;background:linear-gradient(90deg,#00ff9c,#00cfff)}
footer{text-align:center;font-size:11px;opacity:.6;margin-top:8px}
</style>
</head>

<body>
<canvas id="matrix"></canvas>

<div class="wrap">
<div class="container">
<h1>üñ•Ô∏è R-CODE NEON v14</h1>

<label>MASTER KEY</label>
<input id="key">

<label>INPUT</label>
<textarea id="input"></textarea>

<div class="row">
<button onclick="encode()">ENCODE</button>
<button onclick="decode()">DECODE</button>
</div>

<div class="progress"><div class="bar" id="bar"></div></div>

<label>OUTPUT</label>
<textarea id="output" readonly></textarea>
<button onclick="copyOutput()">üìã COPY</button>

<footer>Matrix ‚Ä¢ Static Admin ‚Ä¢ JSON Control</footer>
</div>
</div>

<script>
/* ================= ADMIN + CONTROL ================= */
const CONTROL_URL = "https://oxygen120.github.io/rcode-control/control.json";
const ADMIN_SECRET = "wallah-habibi";

/* Admin check */
function isAdmin(){
  const p=new URLSearchParams(location.search);
  return p.get("admin")==="on" && p.get("key")===ADMIN_SECRET;
}

/* Local usage counter (per device) */
let usage = Number(localStorage.getItem("usage")||0)+1;
localStorage.setItem("usage",usage);

/* IP fetch */
async function getIP(){
  try{
    const r=await fetch("https://api.ipify.org?format=json");
    const j=await r.json(); return j.ip;
  }catch{ return "0.0.0.0"; }
}

/* Lock screens */
function lockPage(t,m){
  document.body.innerHTML=`
  <div style="background:black;color:#00ff9c;height:100vh;
  display:flex;align-items:center;justify-content:center;text-align:center">
    <div><h1>${t}</h1><p>${m}</p></div>
  </div>`;
}
function seizedScreen(){
  document.body.innerHTML=`
  <div style="background:black;color:red;height:100vh;
  display:flex;align-items:center;justify-content:center;text-align:center">
    <div>
      <h1>üö® SERVER SEIZED</h1>
      <p>This service has been seized.</p>
      <p>Ref: RC-${Math.floor(Math.random()*999999)}</p>
    </div>
  </div>`;
}

/* Admin panel (read-only) */
function showAdminPanel(ip){
  const d=document.createElement("div");
  d.style=`position:fixed;top:10px;right:10px;z-index:9999;
  background:#000;border:1px solid #00ff9c;color:#00ff9c;
  padding:12px;border-radius:12px;font-size:12px;width:240px`;
  d.innerHTML=`
  <b>üßø ADMIN PANEL</b><hr>
  IP: ${ip}<br>
  Local usage: ${usage}<hr>
  Edit <code>control.json</code><br>
  enabled / mode / expiry / IPs`;
  document.body.appendChild(d);
}

/* Control check */
async function checkControl(){
  try{
    const r=await fetch(CONTROL_URL+"?t="+Date.now(),{cache:"no-store"});
    const c=await r.json();

    if(c.mode==="seized") return seizedScreen();
    if(c.expiresAt && new Date()>new Date(c.expiresAt))
      return lockPage("‚è≥ EXPIRED","Access expired");
    if(c.enabled===false)
      return lockPage("‚õî REVOKED",c.message||"Blocked");

    const ip=await getIP();
    if(c.blockedIPs?.includes(ip))
      return lockPage("üö´ BLOCKED","IP blocked");
    if(c.allowedIPs?.length && !c.allowedIPs.includes(ip))
      return lockPage("üö´ DENIED","IP not allowed");

    if(isAdmin()) showAdminPanel(ip);
  }catch{
    lockPage("‚ö†Ô∏è ERROR","Control not reachable");
  }
}
checkControl();

/* ================= MATRIX ================= */
const canvas=document.getElementById("matrix"),ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();addEventListener("resize",resize);
const chars="01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ";
const fs=14;let cols=Math.floor(canvas.width/fs);
let drops=Array(cols).fill(1);
setInterval(()=>{
 ctx.fillStyle="rgba(0,0,0,.06)";
 ctx.fillRect(0,0,canvas.width,canvas.height);
 ctx.fillStyle="#00ff9c";ctx.font=fs+"px monospace";
 for(let i=0;i<drops.length;i++){
  const t=chars[Math.random()*chars.length|0];
  ctx.fillText(t,i*fs,drops[i]*fs);
  if(drops[i]*fs>canvas.height&&Math.random()>0.98)drops[i]=0;
  drops[i]++;
 }
},33);

/* ================= CRYPTO ================= */
const te=new TextEncoder(),td=new TextDecoder();
function hash32(s){let h=2166136261;for(let c of s){h^=c.charCodeAt(0);h=Math.imul(h,16777619)}return(h>>>0).toString(16)}
function xorBytes(d,k){const o=new Uint8Array(d.length);for(let i=0;i<d.length;i++)o[i]=d[i]^k[i%k.length];return o}
function toB64(b){return btoa(String.fromCharCode(...b))}
function fromB64(s){return Uint8Array.from(atob(s),c=>c.charCodeAt(0))}

/* Encode / Decode */
function encode(){
 const k=key.value,txt=input.value;
 if(!k||!txt) return alert("Key & text required");
 let d=te.encode(txt),kb=te.encode(k);
 for(let i=0;i<1000;i++) d=xorBytes(d,kb);
 const token=hash32(k+toB64(d));
 output.value=btoa(token+"|0|"+toB64(d));
}
function decode(){
 const k=key.value,enc=input.value;
 if(!k||!enc) return alert("Key & data required");
 let raw;try{raw=atob(enc)}catch{return output.value="Invalid"};
 const [token,exp,b64]=raw.split("|");
 let d=fromB64(b64),kb=te.encode(k);
 for(let i=0;i<1000;i++) d=xorBytes(d,kb);
 if(hash32(k+toB64(d))!==token) return output.value="‚ùå WRONG KEY";
 output.value=td.decode(d);
}
function copyOutput(){
 if(!output.value) return;
 navigator.clipboard.writeText(output.value);
 alert("Copied");
}
</script>
</body>
</html>
